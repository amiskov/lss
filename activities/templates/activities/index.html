{% load l10n %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>⏳ Time | Less Stupidly Spent</title>
        <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">
        <script src="{% static 'js/htmx.min.js' %}" defer></script>
        <script src="{% static 'js/debug.js' %}" defer></script>
    </head>
    <body>
        <div class="container" style="margin-top: 1rem">
            <h5 class="text-uppercase"><a class="text-decoration-none" href="/">Less Stupidly Spent</a></h5>
            <hr>
            {% include "activities/partial.html" %}
        </div>
        <footer class="pt-10">
            <div class="container">
                <br>
                <hr>
                <p>© 2023 Andrey Miskov</p>
            </div>
        </footer>
        {% if acted_activities|length > 1 %}
            <script defer src="{% static 'js/plotly-2.11.1.min.js' %}"></script>
            <script>
                let data = null, layout = null, config = null;
                // Variables are populated in `partial.html`
                document.addEventListener('DOMContentLoaded', function(evt) {
                  initPlot()
                  Plotly.newPlot('pieChart', data, layout, config)
                });
                document.addEventListener('htmx:afterRequest', function(evt) {
                    setTimeout(function() {
                        initPlot();
                        Plotly.newPlot('pieChart', data, layout, config)
                    }, 500)
                });
            </script>
        {% endif %}
    </body>
</html>